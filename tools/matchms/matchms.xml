<tool id="matchms" name="matchMS" version="0.1.0" python_template_version="3.5">
    <requirements>
        <container type="docker">hechth/matchms:latest</container>
    </requirements>

    <environment_variables>
        <environment_variable name="MPLCONFIGDIR">/tmp</environment_variable>
    </environment_variables>

    <command detect_errors="exit_code"><![CDATA[
        python3 ${__tool_directory__}/matchms.py "$references" "$queries" "$similarity_scores"
    ]]></command>

    <inputs>
        <param label="Reference spectra" name="references" type="data" format="msp" help="Reference mass spectra to match against as library." />
        <param label="Queries spectra" name="queries" type="data" format="msp" help="Query mass spectra to match against references." />
    </inputs>
    
    <outputs>
        <data label="Similarity scores of ${on_string}" name="similarity_scores" format="csv" />
    </outputs>

    <tests>
        <test>
            <param name="references" value="fill.msp" ftype="msp"/>
            <param name="queries" value="fill.msp" ftype="msp"/>
            <output name="similarity_scores" file="output.csv" ftype="csv" checksum="md5$0fd5cb719f8aa66ec5d9aeddca4b5fe7"/>
        </test>
    </tests>

    <help><![CDATA[
        TODO: Fill in help.
    ]]></help>
</tool>